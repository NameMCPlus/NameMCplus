function formatTimezoneOffset(time){let offset=time.getTimezoneOffset();let sign;if(offset>0){sign='âˆ’';}else{sign='+';offset=-offset;}
let hourOffset=Math.floor(offset/60);let minuteOffset=offset-60*hourOffset;return '(UTC'+sign+(hourOffset<=9?'0':'')+hourOffset+':'+(minuteOffset<=9?'0':'')+minuteOffset+')';}
function localizeTimes(){$('time').each(function(i,e){let time=new Date(e.getAttribute('datetime'));switch(e.getAttribute('data-type')){case 'date':e.textContent=time.toLocaleDateString();break;case 'time':e.textContent=time.toLocaleTimeString();break;case 'timezone':e.textContent=formatTimezoneOffset(time);break;default:e.textContent=time.toLocaleString();}});$('.title-time').each(function(i,e){let title=e.getAttribute('title');if(title){let time=new Date(title);e.setAttribute('title',time.toLocaleString());}});}
function startTimer(e,clock){let dateString=e.attr('data-datetime');let updateTitle=e.attr('data-update-title');if(!dateString)return;let date=Date.parse(dateString);let title=document.title;let tick=function(){let now=clock();let secondsRemaining=Math.round((date-now.getTime())/1000);if(secondsRemaining<=0)secondsRemaining=0;let s=secondsRemaining;let d=Math.floor(s/(60*60*24));s-=d*(60*60*24);let h=Math.floor(s/(60*60));s-=h*(60*60);let m=Math.floor(s/60);s-=m*60;let text;if(d){text=`${d}:${h.toString().padStart(2,'0')}:${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;}else if(h){text=`${h}:${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;}else{text=`${m}:${s.toString().padStart(2,'0')}`;}
e.text(text);if(updateTitle){document.title=`[${text}] ${title}`;}
if(secondsRemaining>0){setTimeout(tick,1000-now.getMilliseconds());}else{$('#status-bar').removeClass('bg-info').addClass('bg-success');}};tick();}
function makeClock(callback){const now=Date.now();$.getJSON('https://api.namemc.com/time',function(time){const offset=new Date(time).getTime()-(Date.now()+now)/2;callback(function(){return new Date(Date.now()+offset);});});}
function startTimers(){const timers=$('.countdown-timer');if(timers.length>0){makeClock(function(clock){timers.each(function(i,e){startTimer($(e),clock);});});}}
localizeTimes();